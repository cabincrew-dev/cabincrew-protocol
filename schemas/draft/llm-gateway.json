{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "llm-gateway",
    "type": "object",
    "properties": {
        "LLMGatewayRequest": {
            "$ref": "#/definitions/LLMGatewayRequest"
        },
        "LLMGatewayResponse": {
            "$ref": "#/definitions/LLMGatewayResponse"
        },
        "LLMGatewayPolicyConfig": {
            "$ref": "#/definitions/LLMGatewayPolicyConfig"
        }
    },
    "definitions": {
        "Record<string,any>": {
            "type": "object",
            "additionalProperties": false
        },
        "LLMGatewayRequest": {
            "type": "object",
            "properties": {
                "request_id": {
                    "type": "string"
                },
                "timestamp": {
                    "type": "string"
                },
                "source": {
                    "type": "string"
                },
                "model": {
                    "type": "string"
                },
                "provider": {
                    "type": "string"
                },
                "input": {
                    "$ref": "#/definitions/Record<string,any>"
                },
                "context": {
                    "$ref": "#/definitions/Record<string,any>"
                }
            },
            "additionalProperties": false,
            "required": [
                "input",
                "model",
                "request_id",
                "timestamp"
            ],
            "$schema": "http://json-schema.org/draft-07/schema#"
        },
        "GatewayApproval": {
            "type": "object",
            "properties": {
                "approval_id": {
                    "type": "string"
                },
                "required_role": {
                    "type": "string"
                },
                "reason": {
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "LLMGatewayResponse": {
            "type": "object",
            "properties": {
                "request_id": {
                    "type": "string"
                },
                "timestamp": {
                    "type": "string"
                },
                "decision": {
                    "enum": [
                        "allow",
                        "deny",
                        "require_approval",
                        "warn"
                    ],
                    "type": "string"
                },
                "warnings": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "violations": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "approval": {
                    "$ref": "#/definitions/GatewayApproval"
                },
                "routed_model": {
                    "type": "string"
                },
                "rewritten_input": {
                    "$ref": "#/definitions/Record<string,any>"
                },
                "gateway_payload": {
                    "$ref": "#/definitions/Record<string,any>"
                }
            },
            "additionalProperties": false,
            "required": [
                "decision",
                "request_id",
                "timestamp"
            ],
            "$schema": "http://json-schema.org/draft-07/schema#"
        },
        "LLMGatewayRule": {
            "type": "object",
            "properties": {
                "match": {
                    "$ref": "#/definitions/Record<string,any>"
                },
                "action": {
                    "type": "string"
                },
                "metadata": {
                    "$ref": "#/definitions/Record<string,any>"
                }
            },
            "additionalProperties": false,
            "required": [
                "action",
                "match"
            ]
        },
        "LLMGatewayPolicyConfig": {
            "type": "object",
            "properties": {
                "opa_policies": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "onnx_models": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "model_routing": {
                    "$ref": "#/definitions/Record<string,any>"
                },
                "rules": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/LLMGatewayRule"
                    }
                }
            },
            "additionalProperties": false,
            "$schema": "http://json-schema.org/draft-07/schema#"
        }
    }
}